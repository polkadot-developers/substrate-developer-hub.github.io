<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>GenesisConfig Struct · Substrate Developer Hub</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;The genesis configuration is used to initialize the state of storage items in the Substrate runtime at the first block.&lt;/p&gt;
"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="GenesisConfig Struct · Substrate Developer Hub"/><meta property="og:type" content="website"/><meta property="og:url" content="https://substrate-developer-hub.github.io//"/><meta property="og:description" content="&lt;p&gt;The genesis configuration is used to initialize the state of storage items in the Substrate runtime at the first block.&lt;/p&gt;
"/><meta property="og:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/load.js"></script><script type="text/javascript" src="/js/config.js" defer=""></script><script type="text/javascript" src="/js/klaro.min.js" defer=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/Substrate-logo.svg" alt="Substrate Developer Hub"/><h2 class="headerTitleWithLogo">Substrate Developer Hub</h2></a><a href="/en/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/en/docs" target="_self">Docs</a></li><li class=""><a href="/recipes/" target="_self">Recipes</a></li><li class=""><a href="/en/tutorials" target="_self">Tutorials</a></li><li class=""><a href="/en/community" target="_self">Community</a></li><li class=""><a href="https://github.com/paritytech/substrate" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ru/next/runtime/types/genesisconfig-struct">Русский</a></li><li><a href="/docs/zh-CN/next/runtime/types/genesisconfig-struct">中文</a></li><li><a href="https://crowdin.com/project/substrate-developer-hub" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/substrate-developer-hub/substrate-developer-hub.github.io/edit/source/docs/runtime/types/genesisconfig-struct.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">GenesisConfig Struct</h1></header><article><div><span><p>The genesis configuration is used to initialize the state of storage items in the Substrate runtime at the first block.</p>
<h2><a class="anchor" aria-hidden="true" id="declaring-configurable-storage-items"></a><a href="#declaring-configurable-storage-items" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declaring Configurable Storage Items</h2>
<p>In Substrate, a storage item can be initialized in the genesis configuration. To enable this, you add the <code>config()</code> parameter to the storage item declaration.</p>
<p>For example, in the SRML sudo module (<code>srml-sudo</code>), the storage item <code>Key</code> is declared with a <code>config()</code> parameter.</p>
<pre><code class="hljs css language-rust"><span class="token macro-rules function">decl_storage!</span> <span class="token punctuation">{</span>
    <span class="token keyword">trait</span> Store <span class="token keyword">for</span> Module<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> Trait<span class="token operator">></span> <span class="token keyword">as</span> Sudo <span class="token punctuation">{</span>
        Key <span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> T<span class="token punctuation">:</span><span class="token punctuation">:</span>AccountId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="the-_module_-genesisconfig-type"></a><a href="#the-_module_-genesisconfig-type" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <em>Module</em> GenesisConfig Type</h2>
<p>When the <code>decl_storage!</code> macro expands, it generates the <code>GenesisConfig</code> type, which includes a reference to each storage item declared with the <code>config()</code> parameter.</p>
<p>For example, for the SRML sudo module (<code>srml-sudo</code>), the following <code>GenesisConfig</code> type is generated.</p>
<pre><code class="hljs css language-rust"><span class="token keyword">pub</span> <span class="token keyword">struct</span> GenesisConfig<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> Trait<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> key<span class="token punctuation">:</span> T<span class="token punctuation">:</span><span class="token punctuation">:</span>AccountId<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Each module that supports a genesis configuration will also have its <code>GenesisConfig</code> type aliased as <code>&lt;ModuleName&gt;Config</code> as part of the <code>construct_runtime!</code> macro expansion:</p>
<pre><code class="hljs css language-rust"><span class="token keyword">pub</span> <span class="token keyword">type</span> SudoConfig <span class="token operator">=</span> sudo<span class="token punctuation">:</span><span class="token punctuation">:</span>GenesisConfig<span class="token operator">&lt;</span>Runtime<span class="token operator">></span><span class="token punctuation">;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="the-_outer_-genesisconfig-struct"></a><a href="#the-_outer_-genesisconfig-struct" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <em>Outer</em> GenesisConfig Struct</h2>
<p>Once a storage item is declared with a genesis configuration, its value needs to be set. We do this through an <em>outer</em> <code>GenesisConfig</code> type, which is generated by the <code>construct_runtime!</code> macro:</p>
<pre><code class="hljs css language-rust"><span class="token keyword">pub</span> <span class="token keyword">struct</span> GenesisConfig <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> system<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>SystemConfig<span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> timestamp<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>TimestampConfig<span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> consensus<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>ConsensusConfig<span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> indices<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>IndicesConfig<span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> balances<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>BalancesConfig<span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token keyword">pub</span> sudo<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>SudoConfig<span class="token operator">></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This outer type includes references to each of the modules' <code>GenesisConfig</code> types.</p>
<h2><a class="anchor" aria-hidden="true" id="setting-the-genesis-configuration-values"></a><a href="#setting-the-genesis-configuration-values" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting the Genesis Configuration Values</h2>
<p>Now that we have established the module and outer <code>GenesisConfig</code> types, we need to set their values.</p>
<p>You can find an example of this in Substrate's <code>node-template</code> within the <code>chain_spec.rs</code> file. For the SRML sudo module (<code>srml-sudo</code>), the following code snippet shows the genesis configuration of the storage item <code>Key</code>.</p>
<pre><code class="hljs css language-rust"><span class="token keyword">fn</span> <span class="token function">testnet_genesis</span><span class="token punctuation">(</span>root_key<span class="token punctuation">:</span> AccountId<span class="token punctuation">,</span> <span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> GenesisConfig <span class="token punctuation">{</span>
    GenesisConfig <span class="token punctuation">{</span>
        sudo<span class="token punctuation">:</span> <span class="token function">Some</span><span class="token punctuation">(</span>SudoConfig 
        <span class="token punctuation">{</span>
            key<span class="token punctuation">:</span> root_key<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When you start your node, the <em>outer</em> <code>GenesisConfig</code> that you specified will be used to set the initial values into storage. At that point, you can access and use those values just like you would any other runtime storage item.</p>
<blockquote>
<p><strong>Note:</strong> The <code>GenesisConfig</code> type is not available for the WASM runtime environment, but only available for the native environment. The configurable storage items are treated as pre-initialized by the WASM environment.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="exposing-the-genesisconfig-type"></a><a href="#exposing-the-genesisconfig-type" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exposing the GenesisConfig Type</h2>
<p>The <code>GenesisConfig</code> type is not directly exposed through the Substrate metadata endpoint. Instead, the <code>GenesisConfig</code> is used to set an initial value for <code>Storage</code> items, so you can find the impact of this configuration by querying the storage.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/7/2019 by Shawn Tabrizi</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#declaring-configurable-storage-items">Declaring Configurable Storage Items</a></li><li><a href="#the-_module_-genesisconfig-type">The <em>Module</em> GenesisConfig Type</a></li><li><a href="#the-_outer_-genesisconfig-struct">The <em>Outer</em> GenesisConfig Struct</a></li><li><a href="#setting-the-genesis-configuration-values">Setting the Genesis Configuration Values</a></li><li><a href="#exposing-the-genesisconfig-type">Exposing the GenesisConfig Type</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Substrate-logo.svg" alt="Substrate Developer Hub" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/getting-started">Getting Started</a><a href="/en/tutorials">Tutorials</a><a href="/rustdocs/v1.0/">Reference Docs</a><a href="/recipes/">Recipes</a></div><div><h5>Community</h5><a href="/en/videos">Videos</a><a href="http://stackoverflow.com/questions/tagged/substrate" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://riot.im/app/#/room/!HzySYSaIhtyWrwiwEV:matrix.org">Riot Chat</a><a href="https://twitter.com/ParityTech" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.meetup.com/parity/" target="_blank" rel="noreferrer noopener">Events</a></div><div><h5>More</h5><a href="https://www.parity.io/blog/">Blog</a><a href="https://github.com/paritytech/substrate">Substrate GitHub</a><a href="https://github.com/substrate-developer-hub/">Developer Hub GitHub</a><a href="https://www.parity.io/privacy/">Privacy Policy</a><a href="#" id="cookie-settings">Cookie Settings<script>
              var cookieSettings = document.getElementById('cookie-settings');
              cookieSettings.onclick = function() {
                return klaro.show();
              };
              </script></a></div></section><section class="copyright">Copyright © 2019 Parity Technologies</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5cd09916f4ba4c283b2d45ee7386fc34',
                indexName: 'substrate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en"]}
              });
            </script></body></html>