<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>设置 Nicks 模块 · Substrate Developer Hub</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Every pallet has a component called `Config` that is used for configuration. 此组件属于[Rust 中的&quot;trait&quot;](https://doc.rust-lang.org/book/ch10-02-traits.html)范畴； 在Rust中，traits类似于C ++，Java和Go等语言的接口。 FRAME开发人员必须为要包含在runtime中的每个pallet实现这个trait，以便能使用外部runtime参数和类型来配置该pallet。 For instance, in the template pallet that is included in the [Node Template](https://github.com/substrate-developer-hub/substrate-node-template), you will see the following `Config` configuration trait:"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="设置 Nicks 模块 · Substrate Developer Hub"/><meta property="og:type" content="website"/><meta property="og:url" content="https://substrate-developer-hub.github.io//"/><meta property="og:description" content="Every pallet has a component called `Config` that is used for configuration. 此组件属于[Rust 中的&quot;trait&quot;](https://doc.rust-lang.org/book/ch10-02-traits.html)范畴； 在Rust中，traits类似于C ++，Java和Go等语言的接口。 FRAME开发人员必须为要包含在runtime中的每个pallet实现这个trait，以便能使用外部runtime参数和类型来配置该pallet。 For instance, in the template pallet that is included in the [Node Template](https://github.com/substrate-developer-hub/substrate-node-template), you will see the following `Config` configuration trait:"/><meta property="og:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script><script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/load.js"></script><script type="text/javascript" src="/js/past-seminars.js"></script><script type="text/javascript" src="/js/config.js" defer=""></script><script type="text/javascript" src="/js/klaro.min.js" defer=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/Substrate-logo.svg" alt="Substrate Developer Hub"/><h2 class="headerTitleWithLogo">Substrate Developer Hub</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/zh-CN/tutorials" target="_self">教程</a></li><li class=""><a href="/docs/zh-CN/" target="_self">知识库</a></li><li class=""><a href="https://substrate.dev/recipes/" target="_self">进阶菜谱</a></li><li class=""><a href="https://substrate.dev/substrate-how-to-guides/" target="_self">How-to Guides</a></li><li class=""><a href="https://substrate.dev/rustdocs/" target="_self">Reference</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>简体中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/tutorials/add-a-pallet/configure-a-pallet">English</a></li><li><a href="https://crowdin.com/project/substrate-developer-hub" target="_blank" rel="noreferrer noopener">协助翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>在 Runtime 添加一个模块</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">在 Runtime 添加一个模块<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/tutorials/add-a-pallet/">介绍</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/tutorials/add-a-pallet/import-a-pallet">导入 Nicks 模块</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-CN/tutorials/add-a-pallet/configure-a-pallet">设置 Nicks 模块</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/tutorials/add-a-pallet/interact-with-a-pallet">与 Nicks 模块交互</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/tutorials/add-a-pallet/publish-a-pallet">Publish Your Own Pallet</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/substrate-developer-hub/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">设置 Nicks 模块</h1></header><article><div><span><p>Every pallet has a component called <code>Config</code> that is used for configuration. 此组件属于<a href="https://doc.rust-lang.org/book/ch10-02-traits.html">Rust 中的&quot;trait&quot;</a>范畴； 在Rust中，traits类似于C ++，Java和Go等语言的接口。 FRAME开发人员必须为要包含在runtime中的每个pallet实现这个trait，以便能使用外部runtime参数和类型来配置该pallet。 For instance, in the template pallet that is included in the <a href="https://github.com/substrate-developer-hub/substrate-node-template">Node Template</a>, you will see the following <code>Config</code> configuration trait:</p>
<p><strong><code>pallets/template/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">/// Configure the pallet by specifying the parameters and types on which it depends.</span>
<span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token class-name">Config</span><span class="token punctuation">:</span> <span class="token namespace">frame_system<span class="token punctuation">::</span></span><span class="token class-name">Config</span> <span class="token punctuation">{</span>
    <span class="token comment">/// Because this pallet emits events, it depends on the runtime's definition of an event.</span>
    <span class="token keyword">type</span> <span class="token class-name">Event</span><span class="token punctuation">:</span> <span class="token class-name">From</span><span class="token operator">&lt;</span><span class="token class-name">Event</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">>></span> <span class="token operator">+</span> <span class="token class-name">IsType</span><span class="token operator">&lt;&lt;</span><span class="token keyword">Self</span> <span class="token keyword">as</span> <span class="token namespace">frame_system<span class="token punctuation">::</span></span><span class="token class-name">Config</span><span class="token operator">></span><span class="token punctuation">::</span><span class="token class-name">Event</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>As the comment states, we are using the <code>Event</code> type of the <code>Config</code> configuration trait in order to allow the template pallet to emit a type of event that is compatible with the outer runtime. The <code>Config</code> configuration trait may also be used to tune parameters that control the resources required to interact with a pallet or even to limit the resources of the runtime that the pallet may consume. You will see examples of both such cases below when you implement the <code>Config</code> configuration trait for the Nicks pallet.</p>
<p>To figure out what you need to implement for the Nicks pallet specifically, you can take a look at the <a href="https://substrate.dev/rustdocs/latest/pallet_nicks/trait.Config.html"><code>pallet_nicks::Config</code> documentation</a> or the definition of the trait itself in <a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs">the source code</a> of the Nicks pallet. We have annotated the source code for <code>nicks</code> pallet <em>from the substrate source</em> below with enhanced comments that expand on those already included in the documentation, so be sure to read this:</p>
<p><strong><a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs"><code>substrate/frame/nicks/src/lib.rs</code></a></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">/// Already in the Nicks pallet included substrate (with enhanced comments):</span>
<span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token class-name">Config</span><span class="token punctuation">:</span> <span class="token namespace">frame_system<span class="token punctuation">::</span></span><span class="token class-name">Config</span> <span class="token punctuation">{</span>
    <span class="token comment">/// The overarching event type.</span>
    <span class="token keyword">type</span> <span class="token class-name">Event</span><span class="token punctuation">:</span> <span class="token class-name">From</span><span class="token operator">&lt;</span><span class="token class-name">Event</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">>></span> <span class="token operator">+</span> <span class="token class-name">IsType</span><span class="token operator">&lt;&lt;</span><span class="token keyword">Self</span> <span class="token keyword">as</span> <span class="token namespace">frame_system<span class="token punctuation">::</span></span><span class="token class-name">Config</span><span class="token operator">></span><span class="token punctuation">::</span><span class="token class-name">Event</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token comment">/// The currency trait.</span>
    <span class="token keyword">type</span> <span class="token class-name">Currency</span><span class="token punctuation">:</span> <span class="token class-name">ReservableCurrency</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">AccountId</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token comment">/// Reservation fee.</span>
    <span class="token attribute attr-name">#[pallet::constant]</span>
    <span class="token keyword">type</span> <span class="token class-name">ReservationFee</span><span class="token punctuation">:</span> <span class="token class-name">Get</span><span class="token operator">&lt;</span><span class="token class-name">BalanceOf</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">>></span><span class="token punctuation">;</span>

    <span class="token comment">/// What to do with slashed funds.</span>
    <span class="token keyword">type</span> <span class="token class-name">Slashed</span><span class="token punctuation">:</span> <span class="token class-name">OnUnbalanced</span><span class="token operator">&lt;</span><span class="token class-name">NegativeImbalanceOf</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">>></span><span class="token punctuation">;</span>

    <span class="token comment">/// The origin which may forcibly set or remove a name. Root can always do this.</span>
    <span class="token keyword">type</span> <span class="token class-name">ForceOrigin</span><span class="token punctuation">:</span> <span class="token class-name">EnsureOrigin</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">Origin</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token comment">/// The minimum length a name may be.</span>
    <span class="token attribute attr-name">#[pallet::constant]</span>
    <span class="token keyword">type</span> <span class="token class-name">MinLength</span><span class="token punctuation">:</span> <span class="token class-name">Get</span><span class="token operator">&lt;</span><span class="token keyword">u32</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token comment">/// The maximum length a name may be.</span>
    <span class="token attribute attr-name">#[pallet::constant]</span>
    <span class="token keyword">type</span> <span class="token class-name">MaxLength</span><span class="token punctuation">:</span> <span class="token class-name">Get</span><span class="token operator">&lt;</span><span class="token keyword">u32</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Just like we used the Balances pallet as a template for importing the Nicks pallet, let's use the Balances pallet as an example to help us understand how we can implement the <code>Config</code> interface for the Nicks pallet. You will notice that this implementation consists of two parts: a <code>parameter_types!</code> block where constant values are defined and an <code>impl</code> block where the types and values defined by the <code>Config</code> interface are configured. This code block has also been annotated with additional comments that you should be sure to read:</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">/// Already in your template for Balances:</span>
<span class="token macro property">parameter_types!</span> <span class="token punctuation">{</span>
    <span class="token comment">// The u128 constant value 500 is aliased to a type named ExistentialDeposit.</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> <span class="token class-name">ExistentialDeposit</span><span class="token punctuation">:</span> <span class="token keyword">u128</span> <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token comment">// A heuristic that is used for weight estimation.</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> <span class="token class-name">MaxLocks</span><span class="token punctuation">:</span> <span class="token keyword">u32</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token namespace">pallet_balances<span class="token punctuation">::</span></span><span class="token class-name">Config</span> <span class="token keyword">for</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token comment">// The previously defined parameter_type is used as a configuration parameter.</span>
    <span class="token keyword">type</span> <span class="token class-name">MaxLocks</span> <span class="token operator">=</span> <span class="token class-name">MaxLocks</span><span class="token punctuation">;</span>

    <span class="token comment">// The "Balance" that appears after the equal sign is an alias for the u128 type.</span>
    <span class="token keyword">type</span> <span class="token class-name">Balance</span> <span class="token operator">=</span> <span class="token class-name">Balance</span><span class="token punctuation">;</span>

    <span class="token comment">// The empty value, (), is used to specify a no-op callback function.</span>
    <span class="token keyword">type</span> <span class="token class-name">DustRemoval</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The previously defined parameter_type is used as a configuration parameter.</span>
    <span class="token keyword">type</span> <span class="token class-name">ExistentialDeposit</span> <span class="token operator">=</span> <span class="token class-name">ExistentialDeposit</span><span class="token punctuation">;</span>

    <span class="token comment">// The FRAME runtime system is used to track the accounts that hold balances.</span>
    <span class="token keyword">type</span> <span class="token class-name">AccountStore</span> <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">;</span>

    <span class="token comment">// Weight information is supplied to the Balances pallet by the Node Template's runtime.</span>
    <span class="token comment">// type WeightInfo = (); // old way</span>
    <span class="token keyword">type</span> <span class="token class-name">WeightInfo</span> <span class="token operator">=</span> <span class="token namespace">pallet_balances<span class="token punctuation">::</span>weights<span class="token punctuation">::</span></span><span class="token class-name">SubstrateWeight</span><span class="token operator">&lt;</span><span class="token class-name">Runtime</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token comment">// The ubiquitous event type.</span>
    <span class="token keyword">type</span> <span class="token class-name">Event</span> <span class="token operator">=</span> <span class="token class-name">Event</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>impl pallet_balances::Config</code> block allows runtime developers that are including the Balances pallet in their runtime to configure the types and parameters that are specified by the Balances pallet <code>Config</code> configuration trait. For example, the <code>impl</code> block above configures the Balances pallet to use the <code>u128</code> type to track balances. If you were developing a chain where it was important to optimize storage, you could use any unsigned integer type that was at least 32-bits in size; this is because <a href="https://substrate.dev/rustdocs/latest/pallet_balances/pallet/trait.Config.html#associatedtype.Balance">the <code>Balance</code> type</a> for the Balances pallet <code>Config</code> configuration trait is bound by <a href="https://substrate.dev/rustdocs/latest/sp_arithmetic/traits/trait.AtLeast32BitUnsigned.html">the <code>AtLeast32BitUnsigned</code> trait</a>.</p>
<p>Now that you have an idea of the purpose behind the <code>Config</code> configuration trait and how you can implement a FRAME pallet's <code>Config</code> interface for your runtime, let's implement the <code>Config</code> configuration trait for the Nicks pallet. Add the following code to your runtime:</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">/// Add this code block to your template for Nicks:</span>
<span class="token macro property">parameter_types!</span> <span class="token punctuation">{</span>
    <span class="token comment">// Choose a fee that incentivizes desireable behavior.</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> <span class="token class-name">NickReservationFee</span><span class="token punctuation">:</span> <span class="token keyword">u128</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> <span class="token class-name">MinNickLength</span><span class="token punctuation">:</span> <span class="token keyword">u32</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
    <span class="token comment">// Maximum bounds on storage are important to secure your chain.</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> <span class="token class-name">MaxNickLength</span><span class="token punctuation">:</span> <span class="token keyword">u32</span> <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token namespace">pallet_nicks<span class="token punctuation">::</span></span><span class="token class-name">Config</span> <span class="token keyword">for</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token comment">// The Balances pallet implements the ReservableCurrency trait.</span>
    <span class="token comment">// `Balances` is defined in `construct_runtimes!` macro. See below.</span>
    <span class="token comment">// https://substrate.dev/rustdocs/latest/pallet_balances/index.html#implementations-2</span>
    <span class="token keyword">type</span> <span class="token class-name">Currency</span> <span class="token operator">=</span> <span class="token class-name">Balances</span><span class="token punctuation">;</span>

    <span class="token comment">// Use the NickReservationFee from the parameter_types block.</span>
    <span class="token keyword">type</span> <span class="token class-name">ReservationFee</span> <span class="token operator">=</span> <span class="token class-name">NickReservationFee</span><span class="token punctuation">;</span>

    <span class="token comment">// No action is taken when deposits are forfeited.</span>
    <span class="token keyword">type</span> <span class="token class-name">Slashed</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Configure the FRAME System Root origin as the Nick pallet admin.</span>
    <span class="token comment">// https://substrate.dev/rustdocs/latest/frame_system/enum.RawOrigin.html#variant.Root</span>
    <span class="token keyword">type</span> <span class="token class-name">ForceOrigin</span> <span class="token operator">=</span> <span class="token namespace">frame_system<span class="token punctuation">::</span></span><span class="token class-name">EnsureRoot</span><span class="token operator">&lt;</span><span class="token class-name">AccountId</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token comment">// Use the MinNickLength from the parameter_types block.</span>
    <span class="token keyword">type</span> <span class="token class-name">MinLength</span> <span class="token operator">=</span> <span class="token class-name">MinNickLength</span><span class="token punctuation">;</span>

    <span class="token comment">// Use the MaxNickLength from the parameter_types block.</span>
    <span class="token keyword">type</span> <span class="token class-name">MaxLength</span> <span class="token operator">=</span> <span class="token class-name">MaxNickLength</span><span class="token punctuation">;</span>

    <span class="token comment">// The ubiquitous event type.</span>
    <span class="token keyword">type</span> <span class="token class-name">Event</span> <span class="token operator">=</span> <span class="token class-name">Event</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="将nicks添加到construct_runtime-macro里面"></a><a href="#将nicks添加到construct_runtime-macro里面" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>将Nicks添加到<code>construct_runtime!</code> Macro里面</h3>
<p>Next, we need to add the Nicks pallet to the <code>construct_runtime!</code> macro. For this, we need to determine the types that the pallet exposes so that we can tell the runtime that they exist. The complete list of possible types can be found in the <a href="https://substrate.dev/rustdocs/latest/frame_support/macro.construct_runtime.html"><code>construct_runtime!</code> macro documentation</a>.</p>
<p>If we look at the <a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs">Nicks pallet</a> in detail, we know it has:</p>
<ul>
<li>Module <strong>Storage</strong>: Because it uses the <code>#[pallet::storage]</code> macro.</li>
<li>Module <strong>Event</strong>s: Because it uses the <code>#[pallet::event]</code> macro. You will notice that in the case of the Nicks pallet, the <code>Event</code> keyword is parameterized with respect to a type, <code>T</code>; this is because at least one of the events defined by the Nicks pallet depends on a type that is configured with the <code>Config</code> configuration trait.</li>
<li><strong>Call</strong>able Functions: Because it has dispatchable functions in the <code>#[pallet::call]</code> macro.</li>
<li>The <strong>Pallet</strong> type from the <code>#[pallet::pallet]</code> macro.</li>
</ul>
<p>因此当我们添加pallet时，它看起来就像：</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token macro property">construct_runtime!</span><span class="token punctuation">(</span>
    <span class="token keyword">pub</span> <span class="token keyword">enum</span> <span class="token type-definition class-name">Runtime</span> <span class="token keyword">where</span>
        <span class="token class-name">Block</span> <span class="token operator">=</span> <span class="token class-name">Block</span><span class="token punctuation">,</span>
        <span class="token class-name">NodeBlock</span> <span class="token operator">=</span> <span class="token namespace">opaque<span class="token punctuation">::</span></span><span class="token class-name">Block</span><span class="token punctuation">,</span>
        <span class="token class-name">UncheckedExtrinsic</span> <span class="token operator">=</span> <span class="token class-name">UncheckedExtrinsic</span>
    <span class="token punctuation">{</span>
        <span class="token comment">/* --snip-- */</span>
        <span class="token class-name">Balances</span><span class="token punctuation">:</span> <span class="token namespace">pallet_balances<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Pallet</span><span class="token punctuation">,</span> <span class="token class-name">Call</span><span class="token punctuation">,</span> <span class="token class-name">Storage</span><span class="token punctuation">,</span> <span class="token class-name">Config</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token class-name">Event</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">/*** Add This Line ***/</span>
        <span class="token class-name">Nicks</span><span class="token punctuation">:</span> <span class="token namespace">pallet_nicks<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Pallet</span><span class="token punctuation">,</span> <span class="token class-name">Call</span><span class="token punctuation">,</span> <span class="token class-name">Storage</span><span class="token punctuation">,</span> <span class="token class-name">Event</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Note that not all pallets will expose all of these runtime types, and some may expose more! You should always look at the documentation or source code of a pallet to determine which of these types you need to expose.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-CN/tutorials/add-a-pallet/import-a-pallet"><span class="arrow-prev">← </span><span>导入 Nicks 模块</span></a><a class="docs-next button" href="/docs/zh-CN/tutorials/add-a-pallet/interact-with-a-pallet"><span>与 Nicks 模块交互</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Substrate-logo.svg" alt="Substrate Developer Hub" width="66" height="58"/></a><div><h5>开发者中心</h5><a href="/zh-CN/tutorials">教程</a><a href="/docs/zh-CN/">知识库</a><a href="https://substrate.dev/recipes/">进阶菜谱</a><a href="https://substrate.dev/substrate-how-to-guides">How-to Guides</a><a href="https://substrate.dev/rustdocs">API 文档</a><a href="https://playground.substrate.dev/">Playground</a></div><div><h5>社区</h5><a href="/zh-CN/community">社区主页</a><a href="/zh-CN/newsletter">通讯</a><a href="https://matrix.to/#/#substrate-technical:matrix.org">Substrate 技术聊天室</a><a href="/zh-CN/seminar">Substrate 研讨会</a><a href="http://stackoverflow.com/questions/tagged/substrate" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/substrate_io" target="_blank" rel="noreferrer noopener">推特</a><a href="https://www.meetup.com/parity/" target="_blank" rel="noreferrer noopener">聚会活动</a></div><div><h5>更多</h5><a href="https://www.substrate.io/builders-program/">Substrate Builders 计划</a><a href="https://www.parity.io/blog/">Blog</a><a href="https://github.com/paritytech/substrate">Substrate GitHub</a><a href="https://github.com/substrate-developer-hub/">开发者中心 GitHub</a><a href="https://www.parity.io/privacy/">隐私政策</a><a href="/terms">使用条款</a><a href="#" id="cookie-settings">Cookie 设置<script>
                var cookieSettings = document.getElementById('cookie-settings');
                cookieSettings.onclick = function() {
                  return klaro.show();
                };
              </script></a></div></section><section class="copyright">Copyright © 2021 Parity Technologies</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5cd09916f4ba4c283b2d45ee7386fc34',
                indexName: 'substrate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN"]}
              });
            </script></body></html>